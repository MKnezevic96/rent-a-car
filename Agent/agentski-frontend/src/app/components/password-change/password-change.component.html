<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <div class="d-flex" id="wrapper">
        <div id="page-content-wrapper">
      <div class="container fluid">
                <p></p>
                    <div class="form-row">
                        <div class="mb-3 col-lg-6">
                            <label>Type in old password</label>
                            <input type="password" id="oldPass" class="form-control" name="oldPass"
                                [(ngModel)]="oldPassword" />
                        </div>
                    </div>
                    <div class="form-row">
                        <label> </label>
                        <button class="btn btn-primary btn-lg" (click)="checkPassword()">Confirm old password</button>
                    </div>
                     <ng-container *ngIf="checked">
                        <form (ngSubmit)="changePassword()" [formGroup]="userData">

                        <div class="row">
                            <div class="form-group col-lg-6">
                              <label for="inputPassword">Password</label>
                              <input
                                [ngClass]="{'is-invalid': (f.password.touched && f.password.errors) || userData.hasError('notSame'), 'is-valid': f.password.touched && f.password.valid && !userData.hasError('notSame')}"
                                type="password"
                                class="form-control"
                                id="inputPassword"
                                name="password" formControlName="password"
                                placeholder="Enter your password"
                                required>
                              <span style="color: red" *ngIf="f.password.invalid && f.password.touched">Password must contain at least 10 characters, at least one capital letter, at least one number nad one special character @$!%*?&</span>
                            </div>
              
                            <div class="form-group col-lg-6">
                              <label for="inputPasswordRepeat">Repeat password</label>
                              <input
                                [ngClass]="{'is-invalid': (f.passwordRepeat.touched && f.passwordRepeat.errors) || userData.hasError('notSame'), 'is-valid': f.passwordRepeat.touched && f.passwordRepeat.valid && !userData.hasError('notSame')}"
                                type="password"
                                class="form-control"
                                id="inputPasswordRepeat"
                                name="passwordRepeat" formControlName="passwordRepeat"
                                placeholder="Re-enter your password"
                                required>
                              <span style="color: red"
                                    *ngIf="f.passwordRepeat.invalid && f.passwordRepeat.touched">Passwords must match</span>
                            </div>
                          </div>

                          <div class="text-right">
                            <button type="submit" [disabled]="userData.invalid"
                                    class="btn btn-success col-lg-1">Confirm
                            </button>
                          </div>
                        </form>
                    </ng-container> 

                    <!-- <ng-container *ngIf="checked">
                    <div class="form-row">
                        <div class="col-md-4 mb-3">
                            <label>Type in new password</label>
                            <input type="text" id="newPass" class="form-control" name="newPass"
                             [(ngModel)]="newPassword"/>
                        </div>
                   </div>
                    <div>                
                        <button class="btn btn-primary btn-lg" (click)="changePassword()">Set new password</button>
                    </div>
                </ng-container> -->
            </div>
        </div><!-- Page Content Wrapper -->
    </div><!-- Wrapper -->
</body>
</html>